<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:my="http://java.sun.com/jsf/composite/recursos"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    
    <f:event listener="#{LoginBean.comprobarLogin}" type="preRenderView" />

    <h:head>
        <title>Departamento Médico</title>
        <link rel="shortcut icon" type="image/x-icon" href="#{request.contextPath}/img/favicon.ico" />
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/main.css" />
    </h:head>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.71/pdfmake.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.71/vfs_fonts.js"></script>

    <script>
        $.blockUI.defaults.css = {
            padding: 0,
            margin: 0,
            width: '30%',
            top: '40%',
            left: '35%',
            textAlign: 'center',
            color: '#000',
            border: '0px solid #aaa',
            backgroundColor: 'transparent',
            cursor: 'wait'
        };
        $.blockUI.defaults.overlayCSS.backgroundColor = '#b4bab4'; //5E655E b4bab4 eac99a ff0000
        $.blockUI.defaults.overlayCSS.opacity = 0.5;
        $.blockUI.defaults.message = '<b:spinner name="refresh" size="4x" style-class="spiner"/>';
    </script>
    
    <script>
        $.blockUI.defaults.css = {
            // ... (your existing JavaScript code remains unchanged) ...
        };

        // Function to show the specified panel and hide others
        function showPanel(panelId) {
            console.log(panelId);
            // Hide all panels
            $('[id^="panel"]').hide();
            // Show the selected panel
            $('#' + panelId).show();
        }
        // Show panel1 by default
    </script>
        
    <b:scrollUp distance="200" animation="fade" text="" name="scrollUpCustom" />
    
    <my:cabecera id="cabecera"/>
<!--    <my:menuLateralMedico id="menuLateralMedico"/>
    <my:menuLateralEstudiante id="menuLateralEstudiante"/>-->
    <!--<my:menuLateralAdministrador id="menuLateralAdministrador"/>-->
    <my:menuHorizontalAdministrador id="menuHorizontalAdministrador"/>
    <!--<my:menuLateralContador id="menuLateralContador"/>-->
 
    <h:body>

            
        <style>
/*            .vertical-tabview .nav-tabs {
                display: flex;
                flex-direction: column;
            }

            .vertical-tabview .tab-content {
                flex: 1;
            }

             Add any specific styling for individual tabs if needed 
            .vertical-tabview .nav-tabs li {
                 Add your styles for individual tabs here 
            }*/
            
            .custom-button{
                margin-top: 6px;
                color: #333333;
                -webkit-transition: all 0.2s ease-in-out;
                -o-transition: all 0.2s ease-in-out;
                transition: all 0.2s ease-in-out;
                background: #ffffff;
                line-height: 1.428571429;
                border: 1px solid transparent;
                  border-top-color: transparent;
                  border-right-color: transparent;
                  border-bottom-color: transparent;
                  border-left-color: transparent;
                border-radius: 4px 4px 0 0;
                width: 100%;
                border-color: #e7e7e7;
                
                position: relative;
                display: block;
                padding: 10px 15px;
                
            }
            .custom-button:hover{
                padding-bottom: 15px;
                margin-top: 0;
                background: #ffffff;
            }
            
/*            .custom-button:active,
            .custom-button:focus {
                box-shadow: 0 3px 5px rgba(0, 0, 0, 0.125);
                position: relative;
                top: -1px;
            }*/
        </style>
        
        <p:idleMonitor timeout="600000">
            <p:ajax event="idle" listener="#{LoginBean.sesionInactiva()}" />
        </p:idleMonitor>
       

        <b:growl id="growl" escape="true" />
        
        <script>
            window.onload = function() {
                // Ocultar paneles aquí
                showPanel('panel1');
            };
        </script>

        <b:container fluid="true">
           
            <div class="vertical-tabview">
                <b:row>
                    <b:form>
                        <b:column span="2">
                            <b:row>
                                <b:column  style="text-align: center;">
                                    <!-- Call the JavaScript function to show the first panel when the page loads -->
                                    <b:commandButton value="Antecedente" styleClass="btn btn-default custom-button" type="button" onclick="showPanel('panel1');" />
                                </b:column>
                            </b:row>
                            <b:row>
                                <b:column  style="text-align: center;">
                                    <!-- Call the JavaScript function to show the second panel when clicked -->
                                    <b:commandButton value="Signos" styleClass="btn btn-default custom-button" type="button" onclick="showPanel('panel2');" />
                                </b:column>
                            </b:row>
                        </b:column>
                    </b:form>

                    <b:column span="10">
                        <!-- Your left-aligned content goes here -->
                        <b:panelGrid columns="1" id="panel1">
                            <b:panel span="12" offset="0">
                                <b:form id="commentform">
                                    <h3 id="reply-title">
                                        <b>Antecedentes</b>
                                    </h3>
                                    <b:panel title="Listado de antecedentes" look="info" collapsible="false" id="listadoAntecedente">
                                        <!--<h:form>-->
                                            <b:tabView style-class="width: 100%">
                                                <b:tab title="Personal">
                                                    <ui:include src="tabContent.xhtml">
                                                        <ui:param name="lista" value="#{CitaBean.listaExamenesPer}" />
                                                    </ui:include>
                                                </b:tab>
                                                <b:tab title="Familiar">
                                                    <ui:include src="tabContent.xhtml">
                                                        <ui:param name="lista" value="#{CitaBean.listaExamenesFan}" />
                                                    </ui:include>
                                                </b:tab>
                                                <b:tab title="Gineco/Obstétrico">
                                                    <ui:include src="tabContent.xhtml">
                                                        <ui:param name="lista" value="#{CitaBean.listaExamenesAnd}" />
                                                    </ui:include>
                                                </b:tab>
                                                <b:tab title="Vacunación">
                                                    <ui:include src="tabContent.xhtml">
                                                        <ui:param name="lista" value="#{CitaBean.listaExamenesVac}" />
                                                    </ui:include>
                                                </b:tab>
                                                 Otras pestañas aquí 
                                            </b:tabView>
                                        <!--</h:form>-->
                                    </b:panel>
                                    
                                    <b:panel title="Antecedentes del paciente" look="info" collapsible="false" id="modalConfirmacion">
                                        <b:row>
                                            <b:column span="12" class="text-center">
                                                <b:commandButton ajax="true"
                                                                 value=" Crear Antecedente"
                                                                 rendered="#{CitaBean.historia.hisCompletado eq '0'}"
                                                                 oncomplete="$('#modalCreacionHistoriaAntecedente').modal('show')"
                                                                 tooltip="Crear Antecedente" look="primary">
                                                    <b:iconAwesome name="stethoscope"></b:iconAwesome>
                                                </b:commandButton>
                                            </b:column>

                                        </b:row>
                                        <br/>
                                        <b:row>
                                            <b:column span="12">
                                                 <h:form id="tablaForm">
                                                    <b:dataTable large-screen="full-width" id="inscritosTabla" value="#{CitaBean.lista_historia_antecedente}" var="historiaAntecedente" responsive="true" style="font-size: 11px" info="true" content-disabled="false" searching="true"
                                                        page-length="7" multi-column-search="true" multi-column-search-position="top" >
                                                        <b:dataTableColumn label="Fecha" value="#{CitaBean.fechaFormatoYMDS(historiaAntecedente.perAntFechaUlt)}" style="width: 5%" />
                                                        <b:dataTableColumn label="Tipo" value="#{CitaBean.antecedenteFormato(historiaAntecedente.antecedente.antTipo)}" style="width: 5%" />
                                                        <b:dataTableColumn label="Categoría" value="#{historiaAntecedente.antecedente.antCategoria}" style="width: 10%" />
                                                        <b:dataTableColumn label="Antecedente" value="#{historiaAntecedente.antecedente.antGrupo}" style="width: 15%" />
                                                        <b:dataTableColumn label="Descripción" value="#{historiaAntecedente.perAntDescripcion}" style="width: 50%" />
                                                        <b:dataTableColumn label="Doctor" value="#{historiaAntecedente.historias.personasByMedicoPerId.perApellidos} #{historiaAntecedente.historias.personasByMedicoPerId.perNombres}" style="width: 15%" />
                                                    </b:dataTable>
                                                </h:form>
                                            </b:column>
                                        </b:row>
                                    </b:panel>
                                </b:form>
                            </b:panel>
                            <!-- Additional left-aligned content goes here -->
                        </b:panelGrid>
                        <!-- Your left-aligned content goes here -->
                        <b:panelGrid columns="1" id="panel2">
                            <b:panel span="10" offset="0">
                                <b:form id="formSignos">
                                    <h3>
                                        <b>Signos del paciente</b>
                                    </h3>
                                    <b:panel title="Signos vitales" look="info" collapsible="false">
                                        <b:row>
                                            <b:column span="3">
                                                <b:inputText label="Presion Arterial Sistólica"
                                                             placeholder="P.S."
                                                             id="sig_pre_sistolica"
                                                             size="13"
                                                             value="#{CitaBean.signos.sigPresionSistolica}"
                                                             required="true"
                                                             maxlength="3"
                                                             onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;"
                                                             requiredMessage="Ingrese la presión sistólica">
                                                <f:validateLongRange minimum="50" maximum="200"/>
                                                <f:ajax event="change"
                                                        listener="#{CitaBean.calcularPresionArterialMedia()}"
                                                        render="sig_presion_arterial_media growl"/>
                                                </b:inputText>
                                                <b:message for="sig_pre_sistolica"/>
                                            </b:column>
                                            <b:column span="3">
                                                <b:inputText label="Presion Arterial Diastólica"
                                                             placeholder="P.D."
                                                             id="sig_pre_diastolica"
                                                             size="13"
                                                             maxlength="3"
                                                             value="#{CitaBean.signos.sigPresionDiastolica}"
                                                             required="true"
                                                             onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;"
                                                             requiredMessage="Ingrese la presión diastólica">
                                                <f:validateLongRange minimum="50" maximum="200"/>
                                                <f:ajax event="change"
                                                        listener="#{CitaBean.calcularPresionArterialMedia()}"
                                                        render="sig_presion_arterial_media growl"/>
                                                </b:inputText>
                                            </b:column>
                                            <b:column span="3">
                                                <b:inputText label="Presión Arterial Media"
                                                             placeholder="P.A.M."
                                                             id="sig_presion_arterial_media"
                                                             size="13"
                                                             maxlength="100"
                                                             value="#{CitaBean.signos.sigPresionArterialMedia}"
                                                             required="true"
                                                             disabled="true"
                                                             requiredMessage="Ingrese la presión arterial media"/>
                                            </b:column>
                                            <b:column span="2">
                                                <b:inputText label="Temperatura °C"
                                                             placeholder="Temperatura °C"
                                                             id="sig_temperatura"
                                                             size="13"
                                                             maxlength="5"
                                                             value="#{CitaBean.signos.sigTemperatura}"
                                                             required="true"
                                                             onkeypress="if(event.which &lt; 48 || event.which &gt; 57 || event.which &eq; 46) return false;"
                                                             requiredMessage="Ingrese la temperatura">
                                                <f:validateLongRange minimum="20" maximum="60"/>
                                                <f:ajax event="change"
                                                        render="growl"/>
                                                </b:inputText>
                                            </b:column>
                                        </b:row>
                                        <b:row>
                                            <b:column span="3">
                                                <b:inputText label="Frecuencia Respiratoria (minuto)"
                                                             placeholder="F.R."
                                                             id="sig_frecuencia_respiratoria"
                                                             size="13"
                                                             maxlength="3"
                                                             value="#{CitaBean.signos.sigFrecuenciaRespiratoria}"
                                                             required="true"
                                                             onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;"
                                                             requiredMessage="Ingrese la frecuencia respiratoria">
                                                <f:validateLongRange minimum="10" maximum="100"/>
                                                <f:ajax event="change"
                                                        render="growl"/>
                                                </b:inputText>
                                            </b:column>
                                            <b:column span="3">
                                                <b:inputText label="Frecuencia Cardíaca (minuto)"
                                                             placeholder="F.C."
                                                             id="sig_frecuencia_cardiaca"
                                                             size="13"
                                                             maxlength="3"
                                                             value="#{CitaBean.signos.sigFrecuenciaCardiaca}"
                                                             required="true"
                                                             onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;"
                                                             requiredMessage="Ingrese la frecuencia cardiaca">
                                                <f:validateLongRange minimum="10" maximum="300"/>
                                                <f:ajax event="change"
                                                        render="growl"/>
                                                </b:inputText>
                                            </b:column>
                                            <b:column span="2">
                                                <b:inputText label="Saturacion (%)"
                                                             placeholder="Saturación (%)"
                                                             id="sig_saturacion"
                                                             size="13"
                                                             maxlength="2"
                                                             value="#{CitaBean.signos.sigSaturacion}"
                                                             required="true"
                                                             onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;"
                                                             requiredMessage="Ingrese la saturacion">
                                                <f:validateLongRange minimum="50" maximum="100"/>
                                                <f:ajax event="change"
                                                        render="growl"/>
                                                </b:inputText>
                                            </b:column>
                                        </b:row>
                                    </b:panel>
                                </b:form>
                            </b:panel>
                            <!-- Additional left-aligned content goes here -->
                        </b:panelGrid>
                    </b:column>
                </b:row>
            </div>
        </b:container>
        <br/><br/><br/><br/>
    </h:body>
    <my:piePagina id="piePagina"/>
</html>