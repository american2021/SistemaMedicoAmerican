<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:my="http://java.sun.com/jsf/composite/recursos"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.71/pdfmake.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.71/vfs_fonts.js"></script>
    <script>
        $.blockUI.defaults.css = {
            padding: 0,
            margin: 0,
            width: '30%',
            top: '40%',
            left: '35%',
            textAlign: 'center',
            color: '#000',
            border: '0px solid #aaa',
            backgroundColor: 'transparent',
            cursor: 'wait'
        };
        $.blockUI.defaults.overlayCSS.backgroundColor = '#b4bab4'; //5E655E b4bab4 eac99a ff0000
        $.blockUI.defaults.overlayCSS.opacity = 0.5;
        $.blockUI.defaults.message = '<b:spinner name="refresh" size="4x" style-class="spiner"/>';
    </script>

<b:panelGrid columns="1">
    <style>
        .anchoCompleto {
            width: 100% !important; /* ¡Importante para asegurar que esta regla prevalezca! */
        }
        
        .ui-autocomplete-multiple-container.ui-inputfield{
            width : 100% !important;
            height: 100% !important;
            padding: 0.4%;
            border-radius: 4px;
            transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
            border: 1px solid #e7e7e7;
            line-height: 1.428571429;
            box-shadow: inset 0 2px 0 rgba(0, 0, 0, 0.075);
        }
        .ui-autocomplete-input-token input{
            width: 100%;
        }
        .ui-autocomplete-input-token{
            width: 100%;
        }
        .ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button{
            font-family: "Source Sans Pro", "Helvetica Neue", Helvetica, Arial, sans-serif !important;
            font-size: 14px !important;
            line-height: 1.428571429 !important;
            color: #555555 !important;
        }
        .right-caption .label {
            text-align: right;
        }
    </style>
    
    <h3>    
        <b>Tratamiento</b>
    </h3>
    
    
        

        <b:row>
            <b:column span="6">
                <b:panel title="Estado del paciente" look="info" collapsible="false" id="panelEstadoPaciente">
                    <b:radiobutton id="radioButton" value="#{CitaBean.nuevo_tratamiento.traEstado}" required="true" requiredMessage="Seleccione el estado del paciente">
                        <f:selectItem itemValue="0" itemLabel="Agudo" />
                        <f:selectItem itemValue="1" itemLabel="Crónico" />
                    </b:radiobutton>
                    <p:message for="radioButton" />
                </b:panel>
            </b:column>
            <b:column span="6">
                <b:panel title="Antecedentes alérgicos" look="info" collapsible="false" id="panelAntecedenteAlergicos">
                    <b:dataTable value="#{CitaBean.lista_alergias_historia_antecedente}" var="historiaAntecedente" page-length="2" searching="false">
                        <b:dataTableColumn label="Antecedente" value="#{historiaAntecedente.antecedente.antGrupo}" style="width: 50%" />
                        <b:dataTableColumn label="Descripción" value="#{historiaAntecedente.hisAntDescripcion}" style="width: 50%" />
                    </b:dataTable>
                </b:panel>
            </b:column>
        </b:row>
        
        <b:panel title="Ingrese la información para crear el nuevo tratamiento " look="info" collapsible="false" id="panelPrescripcion">
            <b:row >
                <b:column span="6">
                    <b:inputText value="#{CitaBean.nombre_historia_diagnostico}"
                                label="Diagnósticos"
                                placeholder="Escoja un diagnóstico"
                                typeahead="true"
                                id="nombre_historia_diagnostico"
                                typeahead-limit="50"
                                required="true"
                                typeahead-values="#{CitaBean.recuperarNombresHistoriaDiagnosticos()}">
                        <f:ajax event="change"
                                listener="#{CitaBean.recuperarHistoriaDiagnosticoListener()}"
                                render="nombre_historia_diagnostico"/>
                    </b:inputText>
                </b:column>
                <b:column span="6">
                    <b:inputText value="#{CitaBean.nombre_medicamento}"
                                label="Medicamento"
                                placeholder="Escoja un medicamento"
                                typeahead="true"
                                id="med_nombre"
                                typeahead-limit="50"
                                required="true"
                                typeahead-values="#{CitaBean.recuperarNombresMedicamentos()}">
                        <f:ajax event="change"
                                listener="#{CitaBean.recuperarMedicamentosListener()}"
                                render="med_nombre tra_dosis_unitaria tra_medida"/>
                    </b:inputText>
                </b:column>
            </b:row>
            <b:row>
                <b:column span="4">
                    <b:inputText label="Dósis unitaria"
                             placeholder="Dósis unitaria"
                             id="tra_dosis_unitaria"
                             maxlength="500"
                             value="#{CitaBean.nuevo_medicamento.medDosisUnitaria}"
                             required="true"
                             requiredMessage="Ingrese la dósis del medicamento">
                    </b:inputText>
                    <b:message for="tra_dosis_unitaria" />
                </b:column>
                <b:column span="4" >
                    <b:selectOneMenu label="Medida" id="tra_medida" required="true"
                                     value="#{CitaBean.nuevo_medicamento.medMedida}"
                                     requiredMessage="Seleccione la medida del medicamento">
                        <f:selectItem itemLabel="Seleccione la medida" noSelectionOption="true" />
                        <f:selectItem itemLabel="Microgramo" itemValue="1" />
                        <f:selectItem itemLabel="Miligramo" itemValue="2" />
                        <f:selectItem itemLabel="Gramo" itemValue="3" />
                        <f:selectItem itemLabel="Kilogramno" itemValue="4" />
                        <f:selectItem itemLabel="Unidades internacionales" itemValue="5" />
                        <f:selectItem itemLabel="Microlitro" itemValue="6" />
                        <f:selectItem itemLabel="Mililitro" itemValue="7" />
                        <f:selectItem itemLabel="Litro" itemValue="8" />
                        <f:selectItem itemLabel="Ingreso Manual" itemValue="9" />
                        <f:selectItem itemLabel="Porcentaje" itemValue="10" />
                        <f:selectItem itemLabel="Unidades" itemValue="11" />
                        <f:selectItem itemLabel="Miliequivalente " itemValue="12" />
                    </b:selectOneMenu>
                    <b:message for="tra_medida" />
                </b:column>
                <b:column span="4" > 
                    <b:selectOneMenu label="Frecuencia" id="tra_frecuencia" required="true"
                                     value="#{CitaBean.nuevo_tratamiento.traFrecuencia}"
                                     requiredMessage="Seleccione la frecuencia del medicamento">
                        <f:selectItem itemLabel="Seleccione la frecuencia" noSelectionOption="true" />
                        <f:selectItem itemLabel="Cada 4 Horas" itemValue="1" />
                        <f:selectItem itemLabel="Cada 6 Horas" itemValue="2" />
                        <f:selectItem itemLabel="Cada 8 Horas" itemValue="3" />
                        <f:selectItem itemLabel="Cada 12 Horas" itemValue="4" />
                        <f:selectItem itemLabel="Cada 24 Horas" itemValue="5" />
                        <f:selectItem itemLabel="En este momento" itemValue="6" />
                        <f:selectItem itemLabel="Por razones necesarias" itemValue="7" />
                        <f:selectItem itemLabel="Otra" itemValue="8" />
                    </b:selectOneMenu>
                    <b:message for="tra_frecuencia" />
                </b:column>
            </b:row>
            <b:row>
                <b:column span="4" > 
                    <b:selectOneMenu label="Vía de administración" id="tra_via_administracion" required="true"
                                     value="#{CitaBean.nuevo_tratamiento.traViaAdministracion}"
                                     requiredMessage="Seleccione la vía de administración del medicamento">
                        <f:selectItem itemLabel="Seleccione la vía de administración" noSelectionOption="true" />
                        <f:selectItem itemLabel="ORAL" itemValue="1" />
                        <f:selectItem itemLabel="INHALATORIA" itemValue="2" />
                        <f:selectItem itemLabel="PARENTERAL" itemValue="3" />
                        <f:selectItem itemLabel="INTRATRAQUEAL" itemValue="4" />
                        <f:selectItem itemLabel="RECTAL" itemValue="5" />
                        <f:selectItem itemLabel="VAGINAL" itemValue="6" />
                        <f:selectItem itemLabel="INTRAUTERINA" itemValue="7" />
                        <f:selectItem itemLabel="INTRAVESICAL" itemValue="8" />
                        <f:selectItem itemLabel="OCULAR" itemValue="9" />
                        <f:selectItem itemLabel="PARENTERAL (INTRAVENOSA)" itemValue="10" />
                        <f:selectItem itemLabel="PARENTERAL (INTRAMUSCULAR)" itemValue="11" />
                        <f:selectItem itemLabel="PARENTERAL (INTRAVENOSO/INTRAMUSCULAR)" itemValue="12" />
                        <f:selectItem itemLabel="PARENTERAL (INTRAVENOSO/INTRAMUSCULAR/SUBCUTÁNEO)" itemValue="13" />
                        <f:selectItem itemLabel="PARENTERAL (SUBCUTANEA)" itemValue="14" />
                    </b:selectOneMenu>
                    <b:message for="tra_via_administracion" />
                </b:column>
                <b:inputText label="Duración (Días)"
                             placeholder="Duración (Días)"
                             id="tra_duracion"
                             span="4"
                             maxlength="4"
                             value="#{CitaBean.nuevo_tratamiento.traDuracion}"
                             required="true"
                             requiredMessage="Ingrese duración del tratamiento"
                             onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;"/>
                <b:inputText label="Cantidad"
                             placeholder="Cantidad"
                             id="tra_cantidad"
                             span="4"
                             maxlength="4"
                             value="#{CitaBean.nuevo_tratamiento.traCantidad}"
                             required="true"
                             requiredMessage="Ingrese la cantidad del medicamento"
                             onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;"/>
            </b:row>
            <b:row>
                <b:inputTextarea label="Indicaciones"
                                 placeholder="Indicaciones"
                                 id="tra_indicaciones"
                                 span="6"
                                 rows="3"
                                 maxlength="300"
                                 value="#{CitaBean.nuevo_tratamiento.traIndicaciones}"
                                 required="true"
                                 requiredMessage="Ingrese las indicaciones del tratamiento"/>
                <b:inputTextarea label="Advertencias"
                                 placeholder="Advertencias"
                                 id="tra_advertencias"
                                 span="6"
                                 rows="3"
                                 maxlength="300"
                                 value="#{CitaBean.nuevo_tratamiento.traAdvertencias}"
                                 requiredMessage="Ingrese las advertencias del tratamiento"/>
            </b:row>
            <b:row>
                <b:column span="3" offset="4">
                    <b:commandButton large-screen="full-width" id="submit"
                                     ajax="true"
                                     value="Crear Tratamiento"
                                     actionListener="#{CitaBean.crearTratamientoCIE10()}"
                                     tooltip="Agregar Tratamiento" look="primary" 
                                     update="@form">
                                    
                       <b:iconAwesome name="save"></b:iconAwesome>
                       <f:ajax event="change"
                                   listener="#{CitaBean.crearTratamientoCIE10()}"
                                   render="formPrescripcion:panelPrescripcion formPrescripcion:listadoTratamientoPaciente :growl"/>
                   </b:commandButton>
                </b:column>
            </b:row>
        </b:panel>
        
</b:panelGrid>
</html>
